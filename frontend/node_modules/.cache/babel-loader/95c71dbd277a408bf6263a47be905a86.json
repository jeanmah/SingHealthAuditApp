{"ast":null,"code":"var _jsxFileName = \"/Users/marcushjw/mainsinghealth/SingHealthAuditApp/frontend/src/pages/TenantHome.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useContext } from \"react\";\nimport TenantHomeCards from \"../components/TenantHomeCards\";\nimport Navbar from \"../Navbar\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { Context } from \"../Context\";\nimport Loading from \"./Loading\";\nimport TenantHomeTabs from \"../components/TenantHomeTabs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction TenantHome() {\n  _s();\n\n  const {\n    getTenantAudits,\n    tenantState,\n    setTenantState,\n    getUserInfoNoParams,\n    getReport\n  } = useContext(Context);\n  useEffect(() => {\n    async function getResponse() {\n      try {\n        const tenantId = await getUserInfoNoParams().then(response => {\n          console.log(response);\n          return response.data.acc_id;\n        });\n        console.log(tenantId);\n        const reportIdArray = await getTenantAudits(tenantId).then(response => {\n          console.log(response);\n\n          if (response.data.LATEST === -1 && response.data.OVERDUE === -1) {\n            return [...response.data.CLOSED.past_audits];\n          }\n\n          if (response.data.LATEST === -1) {\n            return [...response.data.CLOSED.past_audits, response.data.OVERDUE];\n          }\n\n          if (response.data.OVERDUE === -1) {\n            return [...response.data.CLOSED.past_audits, response.data.LATEST];\n          } // return [response.data.LATEST, ...response.data.CLOSED];\n\n        });\n        console.log(reportIdArray); //initialize array to store all objects of report info\n\n        let reportInfoArray = [];\n\n        for (let i = 0; i < reportIdArray.length; i++) {\n          let reportInfo = await getReport(reportIdArray[i]).then(response => {\n            return response.data;\n          });\n          reportInfoArray.push(reportInfo);\n        }\n\n        if (reportInfoArray.length === reportIdArray.length) {\n          console.log(reportInfoArray);\n          setTenantState(reportInfoArray);\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    }\n\n    getResponse();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: tenantState ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TenantHomeTabs, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TenantHomeCards, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TenantHome, \"MkHgS3Lt/Dvq0wZc5QSEdnH6Cgg=\");\n\n_c = TenantHome;\nexport default TenantHome;\n\nvar _c;\n\n$RefreshReg$(_c, \"TenantHome\");","map":{"version":3,"sources":["/Users/marcushjw/mainsinghealth/SingHealthAuditApp/frontend/src/pages/TenantHome.js"],"names":["React","useEffect","useContext","TenantHomeCards","Navbar","CssBaseline","Context","Loading","TenantHomeTabs","TenantHome","getTenantAudits","tenantState","setTenantState","getUserInfoNoParams","getReport","getResponse","tenantId","then","response","console","log","data","acc_id","reportIdArray","LATEST","OVERDUE","CLOSED","past_audits","reportInfoArray","i","length","reportInfo","push","err"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext } from \"react\";\nimport TenantHomeCards from \"../components/TenantHomeCards\";\nimport Navbar from \"../Navbar\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { Context } from \"../Context\";\nimport Loading from \"./Loading\";\nimport TenantHomeTabs from \"../components/TenantHomeTabs\";\n\nfunction TenantHome() {\n  const {\n    getTenantAudits,\n    tenantState,\n    setTenantState,\n    getUserInfoNoParams,\n    getReport,\n  } = useContext(Context);\n\n  useEffect(() => {\n    async function getResponse() {\n      try {\n        const tenantId = await getUserInfoNoParams().then((response) => {\n          console.log(response);\n          return response.data.acc_id;\n        });\n        console.log(tenantId);\n        const reportIdArray = await getTenantAudits(tenantId).then(\n          (response) => {\n            console.log(response);\n            if (response.data.LATEST === -1 && response.data.OVERDUE === -1) {\n              return [...response.data.CLOSED.past_audits];\n            }\n            if (response.data.LATEST === -1) {\n              return [\n                ...response.data.CLOSED.past_audits,\n                response.data.OVERDUE,\n              ];\n            }\n            if (response.data.OVERDUE === -1) {\n              return [\n                ...response.data.CLOSED.past_audits,\n                response.data.LATEST,\n              ];\n            }\n\n            // return [response.data.LATEST, ...response.data.CLOSED];\n          }\n        );\n        console.log(reportIdArray);\n        //initialize array to store all objects of report info\n        let reportInfoArray = [];\n\n        for (let i = 0; i < reportIdArray.length; i++) {\n          let reportInfo = await getReport(reportIdArray[i]).then(\n            (response) => {\n              return response.data;\n            }\n          );\n          reportInfoArray.push(reportInfo);\n        }\n        if (reportInfoArray.length === reportIdArray.length) {\n          console.log(reportInfoArray);\n          setTenantState(reportInfoArray);\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    }\n    getResponse();\n  }, []);\n  return (\n    <div>\n      {tenantState ? (\n        <>\n          <CssBaseline />\n          <Navbar />\n          <TenantHomeTabs />\n          <TenantHomeCards />\n        </>\n      ) : (\n        <Loading />\n      )}\n    </div>\n  );\n}\n\nexport default TenantHome;\n"]},"metadata":{},"sourceType":"module"}