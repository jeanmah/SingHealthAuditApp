{"ast":null,"code":"import axios from \"axios\";\nconst API_URL = \"http://localhost:8080\";\nexport const USER_NAME_SESSION_ATTRIBUTE_NAME = \"authenticatedUser\";\nexport const SESSION_TOKEN = \"SESSION_TOKEN\";\n\nclass AuthenticationService {\n  executeJwtAuthenticationService(username, password) {\n    console.log(username);\n    return axios.post(`${API_URL}/authenticateP`, {\n      username,\n      password\n    });\n  } // registerSuccessfulLogin(username, password) {\n  //     //console.log('registerSuccessfulLogin')\n  //     sessionStorage.setItem(USER_NAME_SESSION_ATTRIBUTE_NAME, username)\n  //     this.setupAxiosInterceptors(this.createBasicAuthToken(username, password))\n  // }\n\n\n  registerSuccessfulLoginForJwt(username, token) {\n    sessionStorage.setItem(USER_NAME_SESSION_ATTRIBUTE_NAME, username);\n    sessionStorage.setItem(SESSION_TOKEN, this.createJWTToken(token));\n    this.setupAxiosInterceptors(this.createJWTToken(token));\n  }\n\n  createJWTToken(token) {\n    return \"Bearer \" + token;\n  }\n\n  logout() {\n    sessionStorage.removeItem(SESSION_TOKEN);\n    sessionStorage.removeItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\n    window.location.reload();\n  }\n\n  isUserLoggedIn() {\n    let user = sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\n    console.log(user);\n    if (user === null) return false;\n    console.log(\"start page\");\n    return true;\n  }\n\n  getLoggedInUserName() {\n    let user = sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\n    if (user === null) return \"\";\n    return user;\n  }\n\n  setupAxiosInterceptors(token) {\n    axios.interceptors.request.use(config => {\n      if (this.isUserLoggedIn()) {\n        config.headers.authorization = token; // console.log(\"token\")\n        // console.log(token)\n      }\n\n      return config;\n    });\n  }\n\n  getStoredAxiosInterceptor() {\n    axios.interceptors.request.use(config => {\n      if (this.isUserLoggedIn()) {\n        config.headers.authorization = sessionStorage.getItem(SESSION_TOKEN);\n      }\n\n      return config;\n    });\n  }\n\n}\n\nexport default new AuthenticationService();","map":{"version":3,"sources":["/Users/marcushjw/mainsinghealth/SingHealthAuditApp/frontend/src/AuthenticationService.js"],"names":["axios","API_URL","USER_NAME_SESSION_ATTRIBUTE_NAME","SESSION_TOKEN","AuthenticationService","executeJwtAuthenticationService","username","password","console","log","post","registerSuccessfulLoginForJwt","token","sessionStorage","setItem","createJWTToken","setupAxiosInterceptors","logout","removeItem","window","location","reload","isUserLoggedIn","user","getItem","getLoggedInUserName","interceptors","request","use","config","headers","authorization","getStoredAxiosInterceptor"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAG,uBAAhB;AAEA,OAAO,MAAMC,gCAAgC,GAAG,mBAAzC;AACP,OAAO,MAAMC,aAAa,GAAG,eAAtB;;AACP,MAAMC,qBAAN,CAA4B;AAC1BC,EAAAA,+BAA+B,CAACC,QAAD,EAAWC,QAAX,EAAqB;AAClDC,IAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACA,WAAON,KAAK,CAACU,IAAN,CAAY,GAAET,OAAQ,gBAAtB,EAAuC;AAC5CK,MAAAA,QAD4C;AAE5CC,MAAAA;AAF4C,KAAvC,CAAP;AAID,GAPyB,CAS1B;AACA;AACA;AACA;AACA;;;AAEAI,EAAAA,6BAA6B,CAACL,QAAD,EAAWM,KAAX,EAAkB;AAC7CC,IAAAA,cAAc,CAACC,OAAf,CAAuBZ,gCAAvB,EAAyDI,QAAzD;AACAO,IAAAA,cAAc,CAACC,OAAf,CAAuBX,aAAvB,EAAsC,KAAKY,cAAL,CAAoBH,KAApB,CAAtC;AACA,SAAKI,sBAAL,CAA4B,KAAKD,cAAL,CAAoBH,KAApB,CAA5B;AACD;;AAEDG,EAAAA,cAAc,CAACH,KAAD,EAAQ;AACpB,WAAO,YAAYA,KAAnB;AACD;;AAEDK,EAAAA,MAAM,GAAG;AACPJ,IAAAA,cAAc,CAACK,UAAf,CAA0Bf,aAA1B;AACAU,IAAAA,cAAc,CAACK,UAAf,CAA0BhB,gCAA1B;AACAiB,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD;;AAEDC,EAAAA,cAAc,GAAG;AACf,QAAIC,IAAI,GAAGV,cAAc,CAACW,OAAf,CAAuBtB,gCAAvB,CAAX;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAYc,IAAZ;AACA,QAAIA,IAAI,KAAK,IAAb,EAAmB,OAAO,KAAP;AACnBf,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AAEA,WAAO,IAAP;AACD;;AAEDgB,EAAAA,mBAAmB,GAAG;AACpB,QAAIF,IAAI,GAAGV,cAAc,CAACW,OAAf,CAAuBtB,gCAAvB,CAAX;AACA,QAAIqB,IAAI,KAAK,IAAb,EAAmB,OAAO,EAAP;AACnB,WAAOA,IAAP;AACD;;AAEDP,EAAAA,sBAAsB,CAACJ,KAAD,EAAQ;AAC5BZ,IAAAA,KAAK,CAAC0B,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAAgCC,MAAD,IAAY;AACzC,UAAI,KAAKP,cAAL,EAAJ,EAA2B;AACzBO,QAAAA,MAAM,CAACC,OAAP,CAAeC,aAAf,GAA+BnB,KAA/B,CADyB,CAEzB;AACA;AACD;;AACD,aAAOiB,MAAP;AACD,KAPD;AAQD;;AAEDG,EAAAA,yBAAyB,GAAG;AAC1BhC,IAAAA,KAAK,CAAC0B,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAAgCC,MAAD,IAAY;AACzC,UAAI,KAAKP,cAAL,EAAJ,EAA2B;AACzBO,QAAAA,MAAM,CAACC,OAAP,CAAeC,aAAf,GAA+BlB,cAAc,CAACW,OAAf,CAAuBrB,aAAvB,CAA/B;AACD;;AACD,aAAO0B,MAAP;AACD,KALD;AAMD;;AAhEyB;;AAmE5B,eAAe,IAAIzB,qBAAJ,EAAf","sourcesContent":["import axios from \"axios\";\n\nconst API_URL = \"http://localhost:8080\";\n\nexport const USER_NAME_SESSION_ATTRIBUTE_NAME = \"authenticatedUser\";\nexport const SESSION_TOKEN = \"SESSION_TOKEN\";\nclass AuthenticationService {\n  executeJwtAuthenticationService(username, password) {\n    console.log(username);\n    return axios.post(`${API_URL}/authenticateP`, {\n      username,\n      password,\n    });\n  }\n\n  // registerSuccessfulLogin(username, password) {\n  //     //console.log('registerSuccessfulLogin')\n  //     sessionStorage.setItem(USER_NAME_SESSION_ATTRIBUTE_NAME, username)\n  //     this.setupAxiosInterceptors(this.createBasicAuthToken(username, password))\n  // }\n\n  registerSuccessfulLoginForJwt(username, token) {\n    sessionStorage.setItem(USER_NAME_SESSION_ATTRIBUTE_NAME, username);\n    sessionStorage.setItem(SESSION_TOKEN, this.createJWTToken(token));\n    this.setupAxiosInterceptors(this.createJWTToken(token));\n  }\n\n  createJWTToken(token) {\n    return \"Bearer \" + token;\n  }\n\n  logout() {\n    sessionStorage.removeItem(SESSION_TOKEN);\n    sessionStorage.removeItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\n    window.location.reload();\n  }\n\n  isUserLoggedIn() {\n    let user = sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\n    console.log(user);\n    if (user === null) return false;\n    console.log(\"start page\");\n\n    return true;\n  }\n\n  getLoggedInUserName() {\n    let user = sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\n    if (user === null) return \"\";\n    return user;\n  }\n\n  setupAxiosInterceptors(token) {\n    axios.interceptors.request.use((config) => {\n      if (this.isUserLoggedIn()) {\n        config.headers.authorization = token;\n        // console.log(\"token\")\n        // console.log(token)\n      }\n      return config;\n    });\n  }\n\n  getStoredAxiosInterceptor() {\n    axios.interceptors.request.use((config) => {\n      if (this.isUserLoggedIn()) {\n        config.headers.authorization = sessionStorage.getItem(SESSION_TOKEN);\n      }\n      return config;\n    });\n  }\n}\n\nexport default new AuthenticationService();\n"]},"metadata":{},"sourceType":"module"}